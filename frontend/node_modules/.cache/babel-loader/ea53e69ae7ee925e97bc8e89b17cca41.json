{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Anoosh\\\\Desktop\\\\realtime-chat-app\\\\realtime-chat-app\\\\frontend\\\\src\\\\Avatar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\n// import { Buffer } from \"buffer\";\n// import loader from \"../assets/loader.gif\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { setAvatarRoute } from \"./APIRoutes\";\nimport image_0 from \"./0.png\";\nimport image_2 from \"./2.png\";\nimport image_3 from \"./3.png\";\nimport image_4 from \"./4.png\";\nimport image_6 from \"./6.png\";\nimport image_7 from \"./7.png\";\nimport image_9 from \"./9.png\";\nimport image_10 from \"./10.png\";\nimport image_11 from \"./11.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fs = require(\"fs\");\nexport default function SetAvatar() {\n  _s();\n  const navigate = useNavigate();\n  const [avatars, setAvatars] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedAvatar, setSelectedAvatar] = useState(undefined);\n  const toastOptions = {\n    position: \"bottom-right\",\n    autoClose: 8000,\n    pauseOnHover: true,\n    draggable: true,\n    theme: \"dark\"\n  };\n  let image_array = [image_0, image_2, image_3, image_4, image_6, image_7, image_9, image_10, image_11];\n\n  //   images array with 4 random images from the image_array\n  let images = [];\n  for (let i = 0; i < 4; i++) {\n    let random = Math.floor(Math.random() * image_array.length);\n    // Push the base64 content from path to images array\n    const contents = image_array.splice(random, 1);\n  }\n  useEffect(() => {\n    async function fetchAvatars() {\n      if (localStorage.getItem(\"current-user\"))\n        // navigate(\"/login\");\n        console.log(\"hello\");\n    }\n    fetchAvatars();\n  }, []);\n  const setProfilePicture = async () => {\n    if (selectedAvatar === undefined) {\n      toast.error(\"Please select an avatar\", toastOptions);\n    } else {\n      const user = await JSON.parse(localStorage.getItem(\"current-user\"));\n      //log base 64 data of image\n      // console.log(avatars.selectedAvatar.data);\n\n      const {\n        data\n      } = await axios.post(`${setAvatarRoute}/${user._id}`, {\n        image: avatars[selectedAvatar]\n      });\n      if (data.isSet) {\n        user.isAvatarImageSet = true;\n        user.avatarImage = data.image;\n        localStorage.setItem(\"current-user\", JSON.stringify(user));\n        navigate(\"/chatroom\");\n      } else {\n        toast.error(\"Error setting avatar. Please try again.\", toastOptions);\n      }\n    }\n  };\n  useEffect(() => {\n    // Set avatars to the state from images array\n\n    images = images.map(value => ({\n      value,\n      sort: Math.random()\n    })).sort((a, b) => a.sort - b.sort).map(_ref => {\n      let {\n        value\n      } = _ref;\n      return value;\n    });\n    setAvatars(images);\n    console.log(\"IMAGES\");\n    console.log(avatars);\n    setIsLoading(false);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Container, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-container \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Pick an Avatar as your profile picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatars\",\n        children: avatars.map((avatar, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `avatar ${selectedAvatar === index ? \"selected\" : \"\"}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: avatar,\n              alt: \"avatar\",\n              onClick: () => setSelectedAvatar(index),\n              className: \"avatar-image\"\n            }, avatar, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: setProfilePicture,\n        className: \"submit-btn\",\n        children: \"Set as Profile Picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(SetAvatar, \"BeAPsJ8wCQQyE5ntbVx5JvwfYEY=\", false, function () {\n  return [useNavigate];\n});\n_c = SetAvatar;\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 3rem;\n  background-color: #add8e6;\n  height: 100vh;\n  width: 100vw;\n\n  .loader {\n    max-inline-size: 100%;\n  }\n\n  .title-container {\n    h2 {\n      color: black;\n      font-size: 2rem;\n      \n    }\n  }\n  .avatars {\n    display: flex;\n    gap: 2rem;\n\n    .avatar {\n      border: 0.4rem solid transparent;\n      padding: 0.4rem;\n      border-radius: 5rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      z-index: 1;\n      img {\n        height: 6rem;\n        transition: 0.5s ease-in-out;\n      }\n    }\n    .selected {\n      border: 0.4rem solid #add8e6;\n      overflow: hidden;\n      img {\n        transform: scale(1.2);\n      }\n    }\n  }\n  .submit-btn {\n    background-color: rgb(132 204 22);\n    color: white;\n    padding: 1rem 2rem;\n    border: none;\n    font-weight: bold;\n    cursor: pointer;\n    border-radius: 0.4rem;\n    font-size: 1rem;\n    text-transform: uppercase;\n    &:hover {\n      background-color: rgb(101 163 13);\n    }\n  }\n`;\n_c2 = Container;\nvar _c, _c2;\n$RefreshReg$(_c, \"SetAvatar\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"names":["React","useEffect","useState","styled","axios","ToastContainer","toast","useNavigate","setAvatarRoute","image_0","image_2","image_3","image_4","image_6","image_7","image_9","image_10","image_11","fs","require","SetAvatar","navigate","avatars","setAvatars","isLoading","setIsLoading","selectedAvatar","setSelectedAvatar","undefined","toastOptions","position","autoClose","pauseOnHover","draggable","theme","image_array","images","i","random","Math","floor","length","contents","splice","fetchAvatars","localStorage","getItem","console","log","setProfilePicture","error","user","JSON","parse","data","post","_id","image","isSet","isAvatarImageSet","avatarImage","setItem","stringify","map","value","sort","a","b","avatar","index","Container","div"],"sources":["C:/Users/Anoosh/Desktop/realtime-chat-app/realtime-chat-app/frontend/src/Avatar.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\n// import { Buffer } from \"buffer\";\r\n// import loader from \"../assets/loader.gif\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { setAvatarRoute } from \"./APIRoutes\";\r\nimport image_0 from \"./0.png\";\r\nimport image_2 from \"./2.png\";\r\nimport image_3 from \"./3.png\";\r\nimport image_4 from \"./4.png\";\r\nimport image_6 from \"./6.png\";\r\nimport image_7 from \"./7.png\";\r\nimport image_9 from \"./9.png\";\r\nimport image_10 from \"./10.png\";\r\nimport image_11 from \"./11.png\";\r\nconst fs = require(\"fs\");\r\nexport default function SetAvatar() {\r\n  const navigate = useNavigate();\r\n  const [avatars, setAvatars] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedAvatar, setSelectedAvatar] = useState(undefined);\r\n  const toastOptions = {\r\n    position: \"bottom-right\",\r\n    autoClose: 8000,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    theme: \"dark\",\r\n  };\r\n  let image_array = [\r\n    image_0,\r\n    image_2,\r\n    image_3,\r\n    image_4,\r\n    image_6,\r\n    image_7,\r\n    image_9,\r\n    image_10,\r\n    image_11,\r\n  ];\r\n\r\n  //   images array with 4 random images from the image_array\r\n  let images = [];\r\n  for (let i = 0; i < 4; i++) {\r\n    let random = Math.floor(Math.random() * image_array.length);\r\n    // Push the base64 content from path to images array\r\n    const contents=\r\n    image_array.splice(random, 1);\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchAvatars() {\r\n      if (localStorage.getItem(\"current-user\"))\r\n        // navigate(\"/login\");\r\n        console.log(\"hello\");\r\n    }\r\n    fetchAvatars();\r\n  }, []);\r\n\r\n  const setProfilePicture = async () => {\r\n    if (selectedAvatar === undefined) {\r\n      toast.error(\"Please select an avatar\", toastOptions);\r\n    } else {\r\n      const user = await JSON.parse(\r\n        localStorage.getItem(\"current-user\")\r\n      );\r\n      //log base 64 data of image\r\n      // console.log(avatars.selectedAvatar.data);\r\n\r\n      const { data } = await axios.post(`${setAvatarRoute}/${user._id}`, {\r\n        image: avatars[selectedAvatar],\r\n      });\r\n      if (data.isSet) {\r\n        user.isAvatarImageSet = true;\r\n        user.avatarImage = data.image;\r\n        localStorage.setItem(\r\n          \"current-user\",\r\n          JSON.stringify(user)\r\n        );\r\n        navigate(\"/chatroom\");\r\n      } else {\r\n        toast.error(\"Error setting avatar. Please try again.\", toastOptions);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Set avatars to the state from images array\r\n\r\n    images = images\r\n      .map((value) => ({ value, sort: Math.random() }))\r\n      .sort((a, b) => a.sort - b.sort)\r\n      .map(({ value }) => value);\r\n\r\n    setAvatars(images);\r\n    console.log(\"IMAGES\");\r\n    console.log(avatars);\r\n    setIsLoading(false);\r\n  }, []);\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Container>\r\n          {/* <img src={loader} alt=\"loader\" className=\"loader\" /> */}\r\n        </Container>\r\n      ) : (\r\n        <Container>\r\n          <div className=\"title-container \">\r\n            <div className=\"bg-white rounded-lg p-6\">\r\n            <h2>Pick an Avatar as your profile picture</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"avatars\">\r\n            {avatars.map((avatar, index) => {\r\n              return (\r\n                <div\r\n                  className={`avatar ${\r\n                    selectedAvatar === index ? \"selected\" : \"\"\r\n                  }`}\r\n                >\r\n                  <img\r\n                    src={avatar}\r\n                    alt=\"avatar\"\r\n                    key={avatar}\r\n                    onClick={() => setSelectedAvatar(index)}\r\n                    className=\"avatar-image\"\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <button onClick={setProfilePicture} className=\"submit-btn\">\r\n            Set as Profile Picture\r\n          </button>\r\n      \r\n          <ToastContainer />\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  gap: 3rem;\r\n  background-color: #add8e6;\r\n  height: 100vh;\r\n  width: 100vw;\r\n\r\n  .loader {\r\n    max-inline-size: 100%;\r\n  }\r\n\r\n  .title-container {\r\n    h2 {\r\n      color: black;\r\n      font-size: 2rem;\r\n      \r\n    }\r\n  }\r\n  .avatars {\r\n    display: flex;\r\n    gap: 2rem;\r\n\r\n    .avatar {\r\n      border: 0.4rem solid transparent;\r\n      padding: 0.4rem;\r\n      border-radius: 5rem;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      transition: 0.5s ease-in-out;\r\n      z-index: 1;\r\n      img {\r\n        height: 6rem;\r\n        transition: 0.5s ease-in-out;\r\n      }\r\n    }\r\n    .selected {\r\n      border: 0.4rem solid #add8e6;\r\n      overflow: hidden;\r\n      img {\r\n        transform: scale(1.2);\r\n      }\r\n    }\r\n  }\r\n  .submit-btn {\r\n    background-color: rgb(132 204 22);\r\n    color: white;\r\n    padding: 1rem 2rem;\r\n    border: none;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n    border-radius: 0.4rem;\r\n    font-size: 1rem;\r\n    text-transform: uppercase;\r\n    &:hover {\r\n      background-color: rgb(101 163 13);\r\n    }\r\n  }\r\n`;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}